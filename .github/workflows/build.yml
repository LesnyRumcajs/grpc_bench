name: CI

on:
  push:
  pull_request:

env:
  GRPC_TAGS_PREFIX: fenollp/

jobs:
  meta-check:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - run: ./generate_ci.sh | tee .github/workflows/build.yml
    - git --no-pager diff --exit-code
  build-cpp_asio_grpc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh cpp_asio_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:complex_proto $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:complex_proto-$GITHUB_REF_NAME
  build-cpp_asio_grpc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-cpp_asio_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh cpp_asio_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:string_1kB $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:string_1kB-$GITHUB_REF_NAME
  build-cpp_asio_grpc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-cpp_asio_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh cpp_asio_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:string_10B $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:string_10B-$GITHUB_REF_NAME
  build-cpp_asio_grpc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-cpp_asio_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh cpp_asio_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:string_10kB $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:string_10kB-$GITHUB_REF_NAME
  build-cpp_asio_grpc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-cpp_asio_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh cpp_asio_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:string_100B $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:string_100B-$GITHUB_REF_NAME
  bench-cpp_asio_grpc_bench:
    runs-on: ubuntu-latest
    needs: [,build-cpp_asio_grpc_bench-string_1kB,build-cpp_asio_grpc_bench-string_10B,build-cpp_asio_grpc_bench-string_10kB,build-cpp_asio_grpc_bench-complex_proto,build-cpp_asio_grpc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh cpp_asio_grpc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXcpp_asio_grpc_bench:
  build-cpp_grpc_mt_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh cpp_grpc_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:complex_proto $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:complex_proto-$GITHUB_REF_NAME
  build-cpp_grpc_mt_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-cpp_grpc_mt_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh cpp_grpc_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:string_1kB $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:string_1kB-$GITHUB_REF_NAME
  build-cpp_grpc_mt_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-cpp_grpc_mt_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh cpp_grpc_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:string_10B $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:string_10B-$GITHUB_REF_NAME
  build-cpp_grpc_mt_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-cpp_grpc_mt_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh cpp_grpc_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:string_10kB $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:string_10kB-$GITHUB_REF_NAME
  build-cpp_grpc_mt_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-cpp_grpc_mt_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh cpp_grpc_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:string_100B $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:string_100B-$GITHUB_REF_NAME
  bench-cpp_grpc_mt_bench:
    runs-on: ubuntu-latest
    needs: [,build-cpp_grpc_mt_bench-string_1kB,build-cpp_grpc_mt_bench-string_10B,build-cpp_grpc_mt_bench-string_10kB,build-cpp_grpc_mt_bench-complex_proto,build-cpp_grpc_mt_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh cpp_grpc_mt_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXcpp_grpc_mt_bench:
  build-cpp_grpc_st_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh cpp_grpc_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_grpc_st_bench:complex_proto $GRPC_TAGS_PREFIXcpp_grpc_st_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_grpc_st_bench:complex_proto-$GITHUB_REF_NAME
  build-cpp_grpc_st_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-cpp_grpc_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh cpp_grpc_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_grpc_st_bench:string_1kB $GRPC_TAGS_PREFIXcpp_grpc_st_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_grpc_st_bench:string_1kB-$GITHUB_REF_NAME
  build-cpp_grpc_st_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-cpp_grpc_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh cpp_grpc_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_grpc_st_bench:string_10B $GRPC_TAGS_PREFIXcpp_grpc_st_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_grpc_st_bench:string_10B-$GITHUB_REF_NAME
  build-cpp_grpc_st_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-cpp_grpc_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh cpp_grpc_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_grpc_st_bench:string_10kB $GRPC_TAGS_PREFIXcpp_grpc_st_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_grpc_st_bench:string_10kB-$GITHUB_REF_NAME
  build-cpp_grpc_st_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-cpp_grpc_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh cpp_grpc_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXcpp_grpc_st_bench:string_100B $GRPC_TAGS_PREFIXcpp_grpc_st_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcpp_grpc_st_bench:string_100B-$GITHUB_REF_NAME
  bench-cpp_grpc_st_bench:
    runs-on: ubuntu-latest
    needs: [,build-cpp_grpc_st_bench-string_1kB,build-cpp_grpc_st_bench-string_10B,build-cpp_grpc_st_bench-string_10kB,build-cpp_grpc_st_bench-complex_proto,build-cpp_grpc_st_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXcpp_grpc_st_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXcpp_grpc_st_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXcpp_grpc_st_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh cpp_grpc_st_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXcpp_grpc_st_bench:
  build-crystal_grpc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh crystal_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcrystal_grpc_bench:complex_proto $GRPC_TAGS_PREFIXcrystal_grpc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcrystal_grpc_bench:complex_proto-$GITHUB_REF_NAME
  build-crystal_grpc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-crystal_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh crystal_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcrystal_grpc_bench:string_1kB $GRPC_TAGS_PREFIXcrystal_grpc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcrystal_grpc_bench:string_1kB-$GITHUB_REF_NAME
  build-crystal_grpc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-crystal_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh crystal_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcrystal_grpc_bench:string_10B $GRPC_TAGS_PREFIXcrystal_grpc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcrystal_grpc_bench:string_10B-$GITHUB_REF_NAME
  build-crystal_grpc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-crystal_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh crystal_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcrystal_grpc_bench:string_10kB $GRPC_TAGS_PREFIXcrystal_grpc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcrystal_grpc_bench:string_10kB-$GITHUB_REF_NAME
  build-crystal_grpc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-crystal_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh crystal_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcrystal_grpc_bench:string_100B $GRPC_TAGS_PREFIXcrystal_grpc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcrystal_grpc_bench:string_100B-$GITHUB_REF_NAME
  bench-crystal_grpc_bench:
    runs-on: ubuntu-latest
    needs: [,build-crystal_grpc_bench-string_1kB,build-crystal_grpc_bench-string_10B,build-crystal_grpc_bench-string_10kB,build-crystal_grpc_bench-complex_proto,build-crystal_grpc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXcrystal_grpc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXcrystal_grpc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXcrystal_grpc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh crystal_grpc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXcrystal_grpc_bench:
  build-csharp_grpc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh csharp_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcsharp_grpc_bench:complex_proto $GRPC_TAGS_PREFIXcsharp_grpc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcsharp_grpc_bench:complex_proto-$GITHUB_REF_NAME
  build-csharp_grpc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-csharp_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh csharp_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcsharp_grpc_bench:string_1kB $GRPC_TAGS_PREFIXcsharp_grpc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcsharp_grpc_bench:string_1kB-$GITHUB_REF_NAME
  build-csharp_grpc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-csharp_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh csharp_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcsharp_grpc_bench:string_10B $GRPC_TAGS_PREFIXcsharp_grpc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcsharp_grpc_bench:string_10B-$GITHUB_REF_NAME
  build-csharp_grpc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-csharp_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh csharp_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcsharp_grpc_bench:string_10kB $GRPC_TAGS_PREFIXcsharp_grpc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcsharp_grpc_bench:string_10kB-$GITHUB_REF_NAME
  build-csharp_grpc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-csharp_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh csharp_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXcsharp_grpc_bench:string_100B $GRPC_TAGS_PREFIXcsharp_grpc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXcsharp_grpc_bench:string_100B-$GITHUB_REF_NAME
  bench-csharp_grpc_bench:
    runs-on: ubuntu-latest
    needs: [,build-csharp_grpc_bench-string_1kB,build-csharp_grpc_bench-string_10B,build-csharp_grpc_bench-string_10kB,build-csharp_grpc_bench-complex_proto,build-csharp_grpc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXcsharp_grpc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXcsharp_grpc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXcsharp_grpc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh csharp_grpc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXcsharp_grpc_bench:
  build-detailed/java_openj9_grpc_balanced_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh detailed/java_openj9_grpc_balanced_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:complex_proto $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:complex_proto-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_balanced_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_balanced_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh detailed/java_openj9_grpc_balanced_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:string_1kB $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:string_1kB-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_balanced_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_balanced_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh detailed/java_openj9_grpc_balanced_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:string_10B $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:string_10B-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_balanced_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_balanced_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh detailed/java_openj9_grpc_balanced_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:string_10kB $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:string_10kB-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_balanced_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_balanced_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh detailed/java_openj9_grpc_balanced_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:string_100B $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:string_100B-$GITHUB_REF_NAME
  bench-detailed/java_openj9_grpc_balanced_bench:
    runs-on: ubuntu-latest
    needs: [,build-detailed/java_openj9_grpc_balanced_bench-string_1kB,build-detailed/java_openj9_grpc_balanced_bench-string_10B,build-detailed/java_openj9_grpc_balanced_bench-string_10kB,build-detailed/java_openj9_grpc_balanced_bench-complex_proto,build-detailed/java_openj9_grpc_balanced_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh detailed/java_openj9_grpc_balanced_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_balanced_bench:
  build-detailed/java_openj9_grpc_metronome_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh detailed/java_openj9_grpc_metronome_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:complex_proto $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:complex_proto-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_metronome_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_metronome_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh detailed/java_openj9_grpc_metronome_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:string_1kB $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:string_1kB-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_metronome_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_metronome_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh detailed/java_openj9_grpc_metronome_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:string_10B $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:string_10B-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_metronome_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_metronome_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh detailed/java_openj9_grpc_metronome_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:string_10kB $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:string_10kB-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_metronome_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_metronome_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh detailed/java_openj9_grpc_metronome_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:string_100B $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:string_100B-$GITHUB_REF_NAME
  bench-detailed/java_openj9_grpc_metronome_bench:
    runs-on: ubuntu-latest
    needs: [,build-detailed/java_openj9_grpc_metronome_bench-string_1kB,build-detailed/java_openj9_grpc_metronome_bench-string_10B,build-detailed/java_openj9_grpc_metronome_bench-string_10kB,build-detailed/java_openj9_grpc_metronome_bench-complex_proto,build-detailed/java_openj9_grpc_metronome_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh detailed/java_openj9_grpc_metronome_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_metronome_bench:
  build-detailed/java_openj9_grpc_nogc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh detailed/java_openj9_grpc_nogc_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:complex_proto $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:complex_proto-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_nogc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_nogc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh detailed/java_openj9_grpc_nogc_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:string_1kB $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:string_1kB-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_nogc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_nogc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh detailed/java_openj9_grpc_nogc_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:string_10B $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:string_10B-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_nogc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_nogc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh detailed/java_openj9_grpc_nogc_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:string_10kB $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:string_10kB-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_nogc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_nogc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh detailed/java_openj9_grpc_nogc_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:string_100B $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:string_100B-$GITHUB_REF_NAME
  bench-detailed/java_openj9_grpc_nogc_bench:
    runs-on: ubuntu-latest
    needs: [,build-detailed/java_openj9_grpc_nogc_bench-string_1kB,build-detailed/java_openj9_grpc_nogc_bench-string_10B,build-detailed/java_openj9_grpc_nogc_bench-string_10kB,build-detailed/java_openj9_grpc_nogc_bench-complex_proto,build-detailed/java_openj9_grpc_nogc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh detailed/java_openj9_grpc_nogc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_nogc_bench:
  build-detailed/java_openj9_grpc_optavgpause_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh detailed/java_openj9_grpc_optavgpause_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:complex_proto $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:complex_proto-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_optavgpause_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_optavgpause_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh detailed/java_openj9_grpc_optavgpause_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:string_1kB $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:string_1kB-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_optavgpause_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_optavgpause_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh detailed/java_openj9_grpc_optavgpause_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:string_10B $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:string_10B-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_optavgpause_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_optavgpause_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh detailed/java_openj9_grpc_optavgpause_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:string_10kB $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:string_10kB-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_optavgpause_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_optavgpause_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh detailed/java_openj9_grpc_optavgpause_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:string_100B $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:string_100B-$GITHUB_REF_NAME
  bench-detailed/java_openj9_grpc_optavgpause_bench:
    runs-on: ubuntu-latest
    needs: [,build-detailed/java_openj9_grpc_optavgpause_bench-string_1kB,build-detailed/java_openj9_grpc_optavgpause_bench-string_10B,build-detailed/java_openj9_grpc_optavgpause_bench-string_10kB,build-detailed/java_openj9_grpc_optavgpause_bench-complex_proto,build-detailed/java_openj9_grpc_optavgpause_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh detailed/java_openj9_grpc_optavgpause_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optavgpause_bench:
  build-detailed/java_openj9_grpc_optthruput_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh detailed/java_openj9_grpc_optthruput_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:complex_proto $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:complex_proto-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_optthruput_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_optthruput_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh detailed/java_openj9_grpc_optthruput_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:string_1kB $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:string_1kB-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_optthruput_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_optthruput_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh detailed/java_openj9_grpc_optthruput_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:string_10B $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:string_10B-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_optthruput_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_optthruput_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh detailed/java_openj9_grpc_optthruput_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:string_10kB $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:string_10kB-$GITHUB_REF_NAME
  build-detailed/java_openj9_grpc_optthruput_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-detailed/java_openj9_grpc_optthruput_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh detailed/java_openj9_grpc_optthruput_bench
    - run: docker tag $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:string_100B $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:string_100B-$GITHUB_REF_NAME
  bench-detailed/java_openj9_grpc_optthruput_bench:
    runs-on: ubuntu-latest
    needs: [,build-detailed/java_openj9_grpc_optthruput_bench-string_1kB,build-detailed/java_openj9_grpc_optthruput_bench-string_10B,build-detailed/java_openj9_grpc_optthruput_bench-string_10kB,build-detailed/java_openj9_grpc_optthruput_bench-complex_proto,build-detailed/java_openj9_grpc_optthruput_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh detailed/java_openj9_grpc_optthruput_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXdetailed/java_openj9_grpc_optthruput_bench:
  build-dotnet_grpc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh dotnet_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXdotnet_grpc_bench:complex_proto $GRPC_TAGS_PREFIXdotnet_grpc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdotnet_grpc_bench:complex_proto-$GITHUB_REF_NAME
  build-dotnet_grpc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-dotnet_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh dotnet_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXdotnet_grpc_bench:string_1kB $GRPC_TAGS_PREFIXdotnet_grpc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdotnet_grpc_bench:string_1kB-$GITHUB_REF_NAME
  build-dotnet_grpc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-dotnet_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh dotnet_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXdotnet_grpc_bench:string_10B $GRPC_TAGS_PREFIXdotnet_grpc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdotnet_grpc_bench:string_10B-$GITHUB_REF_NAME
  build-dotnet_grpc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-dotnet_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh dotnet_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXdotnet_grpc_bench:string_10kB $GRPC_TAGS_PREFIXdotnet_grpc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdotnet_grpc_bench:string_10kB-$GITHUB_REF_NAME
  build-dotnet_grpc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-dotnet_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh dotnet_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXdotnet_grpc_bench:string_100B $GRPC_TAGS_PREFIXdotnet_grpc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXdotnet_grpc_bench:string_100B-$GITHUB_REF_NAME
  bench-dotnet_grpc_bench:
    runs-on: ubuntu-latest
    needs: [,build-dotnet_grpc_bench-string_1kB,build-dotnet_grpc_bench-string_10B,build-dotnet_grpc_bench-string_10kB,build-dotnet_grpc_bench-complex_proto,build-dotnet_grpc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXdotnet_grpc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXdotnet_grpc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXdotnet_grpc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh dotnet_grpc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXdotnet_grpc_bench:
  build-elixir_grpc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh elixir_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXelixir_grpc_bench:complex_proto $GRPC_TAGS_PREFIXelixir_grpc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXelixir_grpc_bench:complex_proto-$GITHUB_REF_NAME
  build-elixir_grpc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-elixir_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh elixir_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXelixir_grpc_bench:string_1kB $GRPC_TAGS_PREFIXelixir_grpc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXelixir_grpc_bench:string_1kB-$GITHUB_REF_NAME
  build-elixir_grpc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-elixir_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh elixir_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXelixir_grpc_bench:string_10B $GRPC_TAGS_PREFIXelixir_grpc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXelixir_grpc_bench:string_10B-$GITHUB_REF_NAME
  build-elixir_grpc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-elixir_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh elixir_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXelixir_grpc_bench:string_10kB $GRPC_TAGS_PREFIXelixir_grpc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXelixir_grpc_bench:string_10kB-$GITHUB_REF_NAME
  build-elixir_grpc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-elixir_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh elixir_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXelixir_grpc_bench:string_100B $GRPC_TAGS_PREFIXelixir_grpc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXelixir_grpc_bench:string_100B-$GITHUB_REF_NAME
  bench-elixir_grpc_bench:
    runs-on: ubuntu-latest
    needs: [,build-elixir_grpc_bench-string_1kB,build-elixir_grpc_bench-string_10B,build-elixir_grpc_bench-string_10kB,build-elixir_grpc_bench-complex_proto,build-elixir_grpc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXelixir_grpc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXelixir_grpc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXelixir_grpc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh elixir_grpc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXelixir_grpc_bench:
  build-erlang_grpcbox_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh erlang_grpcbox_bench
    - run: docker tag $GRPC_TAGS_PREFIXerlang_grpcbox_bench:complex_proto $GRPC_TAGS_PREFIXerlang_grpcbox_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXerlang_grpcbox_bench:complex_proto-$GITHUB_REF_NAME
  build-erlang_grpcbox_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-erlang_grpcbox_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh erlang_grpcbox_bench
    - run: docker tag $GRPC_TAGS_PREFIXerlang_grpcbox_bench:string_1kB $GRPC_TAGS_PREFIXerlang_grpcbox_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXerlang_grpcbox_bench:string_1kB-$GITHUB_REF_NAME
  build-erlang_grpcbox_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-erlang_grpcbox_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh erlang_grpcbox_bench
    - run: docker tag $GRPC_TAGS_PREFIXerlang_grpcbox_bench:string_10B $GRPC_TAGS_PREFIXerlang_grpcbox_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXerlang_grpcbox_bench:string_10B-$GITHUB_REF_NAME
  build-erlang_grpcbox_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-erlang_grpcbox_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh erlang_grpcbox_bench
    - run: docker tag $GRPC_TAGS_PREFIXerlang_grpcbox_bench:string_10kB $GRPC_TAGS_PREFIXerlang_grpcbox_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXerlang_grpcbox_bench:string_10kB-$GITHUB_REF_NAME
  build-erlang_grpcbox_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-erlang_grpcbox_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh erlang_grpcbox_bench
    - run: docker tag $GRPC_TAGS_PREFIXerlang_grpcbox_bench:string_100B $GRPC_TAGS_PREFIXerlang_grpcbox_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXerlang_grpcbox_bench:string_100B-$GITHUB_REF_NAME
  bench-erlang_grpcbox_bench:
    runs-on: ubuntu-latest
    needs: [,build-erlang_grpcbox_bench-string_1kB,build-erlang_grpcbox_bench-string_10B,build-erlang_grpcbox_bench-string_10kB,build-erlang_grpcbox_bench-complex_proto,build-erlang_grpcbox_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXerlang_grpcbox_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXerlang_grpcbox_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXerlang_grpcbox_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh erlang_grpcbox_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXerlang_grpcbox_bench:
  build-go_grpc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh go_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXgo_grpc_bench:complex_proto $GRPC_TAGS_PREFIXgo_grpc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXgo_grpc_bench:complex_proto-$GITHUB_REF_NAME
  build-go_grpc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-go_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh go_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXgo_grpc_bench:string_1kB $GRPC_TAGS_PREFIXgo_grpc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXgo_grpc_bench:string_1kB-$GITHUB_REF_NAME
  build-go_grpc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-go_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh go_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXgo_grpc_bench:string_10B $GRPC_TAGS_PREFIXgo_grpc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXgo_grpc_bench:string_10B-$GITHUB_REF_NAME
  build-go_grpc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-go_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh go_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXgo_grpc_bench:string_10kB $GRPC_TAGS_PREFIXgo_grpc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXgo_grpc_bench:string_10kB-$GITHUB_REF_NAME
  build-go_grpc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-go_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh go_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXgo_grpc_bench:string_100B $GRPC_TAGS_PREFIXgo_grpc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXgo_grpc_bench:string_100B-$GITHUB_REF_NAME
  bench-go_grpc_bench:
    runs-on: ubuntu-latest
    needs: [,build-go_grpc_bench-string_1kB,build-go_grpc_bench-string_10B,build-go_grpc_bench-string_10kB,build-go_grpc_bench-complex_proto,build-go_grpc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXgo_grpc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXgo_grpc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXgo_grpc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh go_grpc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXgo_grpc_bench:
  build-java_aot_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh java_aot_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_aot_bench:complex_proto $GRPC_TAGS_PREFIXjava_aot_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_aot_bench:complex_proto-$GITHUB_REF_NAME
  build-java_aot_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-java_aot_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh java_aot_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_aot_bench:string_1kB $GRPC_TAGS_PREFIXjava_aot_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_aot_bench:string_1kB-$GITHUB_REF_NAME
  build-java_aot_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-java_aot_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh java_aot_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_aot_bench:string_10B $GRPC_TAGS_PREFIXjava_aot_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_aot_bench:string_10B-$GITHUB_REF_NAME
  build-java_aot_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-java_aot_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh java_aot_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_aot_bench:string_10kB $GRPC_TAGS_PREFIXjava_aot_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_aot_bench:string_10kB-$GITHUB_REF_NAME
  build-java_aot_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-java_aot_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh java_aot_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_aot_bench:string_100B $GRPC_TAGS_PREFIXjava_aot_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_aot_bench:string_100B-$GITHUB_REF_NAME
  bench-java_aot_bench:
    runs-on: ubuntu-latest
    needs: [,build-java_aot_bench-string_1kB,build-java_aot_bench-string_10B,build-java_aot_bench-string_10kB,build-java_aot_bench-complex_proto,build-java_aot_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXjava_aot_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXjava_aot_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXjava_aot_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh java_aot_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXjava_aot_bench:
  build-java_hotspot_grpc_g1gc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh java_hotspot_grpc_g1gc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:complex_proto $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:complex_proto-$GITHUB_REF_NAME
  build-java_hotspot_grpc_g1gc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_g1gc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh java_hotspot_grpc_g1gc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:string_1kB $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:string_1kB-$GITHUB_REF_NAME
  build-java_hotspot_grpc_g1gc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_g1gc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh java_hotspot_grpc_g1gc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:string_10B $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:string_10B-$GITHUB_REF_NAME
  build-java_hotspot_grpc_g1gc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_g1gc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh java_hotspot_grpc_g1gc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:string_10kB $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:string_10kB-$GITHUB_REF_NAME
  build-java_hotspot_grpc_g1gc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_g1gc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh java_hotspot_grpc_g1gc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:string_100B $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:string_100B-$GITHUB_REF_NAME
  bench-java_hotspot_grpc_g1gc_bench:
    runs-on: ubuntu-latest
    needs: [,build-java_hotspot_grpc_g1gc_bench-string_1kB,build-java_hotspot_grpc_g1gc_bench-string_10B,build-java_hotspot_grpc_g1gc_bench-string_10kB,build-java_hotspot_grpc_g1gc_bench-complex_proto,build-java_hotspot_grpc_g1gc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh java_hotspot_grpc_g1gc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_g1gc_bench:
  build-java_hotspot_grpc_pgc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh java_hotspot_grpc_pgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:complex_proto $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:complex_proto-$GITHUB_REF_NAME
  build-java_hotspot_grpc_pgc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_pgc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh java_hotspot_grpc_pgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:string_1kB $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:string_1kB-$GITHUB_REF_NAME
  build-java_hotspot_grpc_pgc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_pgc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh java_hotspot_grpc_pgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:string_10B $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:string_10B-$GITHUB_REF_NAME
  build-java_hotspot_grpc_pgc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_pgc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh java_hotspot_grpc_pgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:string_10kB $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:string_10kB-$GITHUB_REF_NAME
  build-java_hotspot_grpc_pgc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_pgc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh java_hotspot_grpc_pgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:string_100B $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:string_100B-$GITHUB_REF_NAME
  bench-java_hotspot_grpc_pgc_bench:
    runs-on: ubuntu-latest
    needs: [,build-java_hotspot_grpc_pgc_bench-string_1kB,build-java_hotspot_grpc_pgc_bench-string_10B,build-java_hotspot_grpc_pgc_bench-string_10kB,build-java_hotspot_grpc_pgc_bench-complex_proto,build-java_hotspot_grpc_pgc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh java_hotspot_grpc_pgc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_pgc_bench:
  build-java_hotspot_grpc_sgc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh java_hotspot_grpc_sgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:complex_proto $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:complex_proto-$GITHUB_REF_NAME
  build-java_hotspot_grpc_sgc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_sgc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh java_hotspot_grpc_sgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:string_1kB $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:string_1kB-$GITHUB_REF_NAME
  build-java_hotspot_grpc_sgc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_sgc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh java_hotspot_grpc_sgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:string_10B $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:string_10B-$GITHUB_REF_NAME
  build-java_hotspot_grpc_sgc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_sgc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh java_hotspot_grpc_sgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:string_10kB $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:string_10kB-$GITHUB_REF_NAME
  build-java_hotspot_grpc_sgc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_sgc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh java_hotspot_grpc_sgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:string_100B $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:string_100B-$GITHUB_REF_NAME
  bench-java_hotspot_grpc_sgc_bench:
    runs-on: ubuntu-latest
    needs: [,build-java_hotspot_grpc_sgc_bench-string_1kB,build-java_hotspot_grpc_sgc_bench-string_10B,build-java_hotspot_grpc_sgc_bench-string_10kB,build-java_hotspot_grpc_sgc_bench-complex_proto,build-java_hotspot_grpc_sgc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh java_hotspot_grpc_sgc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_sgc_bench:
  build-java_hotspot_grpc_she_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh java_hotspot_grpc_she_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:complex_proto $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:complex_proto-$GITHUB_REF_NAME
  build-java_hotspot_grpc_she_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_she_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh java_hotspot_grpc_she_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:string_1kB $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:string_1kB-$GITHUB_REF_NAME
  build-java_hotspot_grpc_she_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_she_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh java_hotspot_grpc_she_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:string_10B $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:string_10B-$GITHUB_REF_NAME
  build-java_hotspot_grpc_she_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_she_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh java_hotspot_grpc_she_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:string_10kB $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:string_10kB-$GITHUB_REF_NAME
  build-java_hotspot_grpc_she_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_she_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh java_hotspot_grpc_she_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:string_100B $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:string_100B-$GITHUB_REF_NAME
  bench-java_hotspot_grpc_she_bench:
    runs-on: ubuntu-latest
    needs: [,build-java_hotspot_grpc_she_bench-string_1kB,build-java_hotspot_grpc_she_bench-string_10B,build-java_hotspot_grpc_she_bench-string_10kB,build-java_hotspot_grpc_she_bench-complex_proto,build-java_hotspot_grpc_she_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh java_hotspot_grpc_she_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_she_bench:
  build-java_hotspot_grpc_zgc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh java_hotspot_grpc_zgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:complex_proto $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:complex_proto-$GITHUB_REF_NAME
  build-java_hotspot_grpc_zgc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_zgc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh java_hotspot_grpc_zgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:string_1kB $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:string_1kB-$GITHUB_REF_NAME
  build-java_hotspot_grpc_zgc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_zgc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh java_hotspot_grpc_zgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:string_10B $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:string_10B-$GITHUB_REF_NAME
  build-java_hotspot_grpc_zgc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_zgc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh java_hotspot_grpc_zgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:string_10kB $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:string_10kB-$GITHUB_REF_NAME
  build-java_hotspot_grpc_zgc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-java_hotspot_grpc_zgc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh java_hotspot_grpc_zgc_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:string_100B $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:string_100B-$GITHUB_REF_NAME
  bench-java_hotspot_grpc_zgc_bench:
    runs-on: ubuntu-latest
    needs: [,build-java_hotspot_grpc_zgc_bench-string_1kB,build-java_hotspot_grpc_zgc_bench-string_10B,build-java_hotspot_grpc_zgc_bench-string_10kB,build-java_hotspot_grpc_zgc_bench-complex_proto,build-java_hotspot_grpc_zgc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh java_hotspot_grpc_zgc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXjava_hotspot_grpc_zgc_bench:
  build-java_micronaut_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh java_micronaut_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_micronaut_bench:complex_proto $GRPC_TAGS_PREFIXjava_micronaut_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_micronaut_bench:complex_proto-$GITHUB_REF_NAME
  build-java_micronaut_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-java_micronaut_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh java_micronaut_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_micronaut_bench:string_1kB $GRPC_TAGS_PREFIXjava_micronaut_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_micronaut_bench:string_1kB-$GITHUB_REF_NAME
  build-java_micronaut_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-java_micronaut_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh java_micronaut_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_micronaut_bench:string_10B $GRPC_TAGS_PREFIXjava_micronaut_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_micronaut_bench:string_10B-$GITHUB_REF_NAME
  build-java_micronaut_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-java_micronaut_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh java_micronaut_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_micronaut_bench:string_10kB $GRPC_TAGS_PREFIXjava_micronaut_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_micronaut_bench:string_10kB-$GITHUB_REF_NAME
  build-java_micronaut_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-java_micronaut_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh java_micronaut_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_micronaut_bench:string_100B $GRPC_TAGS_PREFIXjava_micronaut_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_micronaut_bench:string_100B-$GITHUB_REF_NAME
  bench-java_micronaut_bench:
    runs-on: ubuntu-latest
    needs: [,build-java_micronaut_bench-string_1kB,build-java_micronaut_bench-string_10B,build-java_micronaut_bench-string_10kB,build-java_micronaut_bench-complex_proto,build-java_micronaut_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXjava_micronaut_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXjava_micronaut_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXjava_micronaut_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh java_micronaut_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXjava_micronaut_bench:
  build-java_micronaut_workstealing_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh java_micronaut_workstealing_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:complex_proto $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:complex_proto-$GITHUB_REF_NAME
  build-java_micronaut_workstealing_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-java_micronaut_workstealing_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh java_micronaut_workstealing_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:string_1kB $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:string_1kB-$GITHUB_REF_NAME
  build-java_micronaut_workstealing_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-java_micronaut_workstealing_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh java_micronaut_workstealing_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:string_10B $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:string_10B-$GITHUB_REF_NAME
  build-java_micronaut_workstealing_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-java_micronaut_workstealing_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh java_micronaut_workstealing_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:string_10kB $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:string_10kB-$GITHUB_REF_NAME
  build-java_micronaut_workstealing_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-java_micronaut_workstealing_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh java_micronaut_workstealing_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:string_100B $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:string_100B-$GITHUB_REF_NAME
  bench-java_micronaut_workstealing_bench:
    runs-on: ubuntu-latest
    needs: [,build-java_micronaut_workstealing_bench-string_1kB,build-java_micronaut_workstealing_bench-string_10B,build-java_micronaut_workstealing_bench-string_10kB,build-java_micronaut_workstealing_bench-complex_proto,build-java_micronaut_workstealing_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh java_micronaut_workstealing_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXjava_micronaut_workstealing_bench:
  build-java_openj9_grpc_gencon_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh java_openj9_grpc_gencon_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:complex_proto $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:complex_proto-$GITHUB_REF_NAME
  build-java_openj9_grpc_gencon_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-java_openj9_grpc_gencon_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh java_openj9_grpc_gencon_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:string_1kB $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:string_1kB-$GITHUB_REF_NAME
  build-java_openj9_grpc_gencon_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-java_openj9_grpc_gencon_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh java_openj9_grpc_gencon_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:string_10B $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:string_10B-$GITHUB_REF_NAME
  build-java_openj9_grpc_gencon_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-java_openj9_grpc_gencon_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh java_openj9_grpc_gencon_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:string_10kB $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:string_10kB-$GITHUB_REF_NAME
  build-java_openj9_grpc_gencon_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-java_openj9_grpc_gencon_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh java_openj9_grpc_gencon_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:string_100B $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:string_100B-$GITHUB_REF_NAME
  bench-java_openj9_grpc_gencon_bench:
    runs-on: ubuntu-latest
    needs: [,build-java_openj9_grpc_gencon_bench-string_1kB,build-java_openj9_grpc_gencon_bench-string_10B,build-java_openj9_grpc_gencon_bench-string_10kB,build-java_openj9_grpc_gencon_bench-complex_proto,build-java_openj9_grpc_gencon_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh java_openj9_grpc_gencon_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXjava_openj9_grpc_gencon_bench:
  build-java_quarkus_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh java_quarkus_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_quarkus_bench:complex_proto $GRPC_TAGS_PREFIXjava_quarkus_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_quarkus_bench:complex_proto-$GITHUB_REF_NAME
  build-java_quarkus_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-java_quarkus_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh java_quarkus_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_quarkus_bench:string_1kB $GRPC_TAGS_PREFIXjava_quarkus_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_quarkus_bench:string_1kB-$GITHUB_REF_NAME
  build-java_quarkus_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-java_quarkus_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh java_quarkus_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_quarkus_bench:string_10B $GRPC_TAGS_PREFIXjava_quarkus_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_quarkus_bench:string_10B-$GITHUB_REF_NAME
  build-java_quarkus_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-java_quarkus_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh java_quarkus_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_quarkus_bench:string_10kB $GRPC_TAGS_PREFIXjava_quarkus_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_quarkus_bench:string_10kB-$GITHUB_REF_NAME
  build-java_quarkus_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-java_quarkus_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh java_quarkus_bench
    - run: docker tag $GRPC_TAGS_PREFIXjava_quarkus_bench:string_100B $GRPC_TAGS_PREFIXjava_quarkus_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXjava_quarkus_bench:string_100B-$GITHUB_REF_NAME
  bench-java_quarkus_bench:
    runs-on: ubuntu-latest
    needs: [,build-java_quarkus_bench-string_1kB,build-java_quarkus_bench-string_10B,build-java_quarkus_bench-string_10kB,build-java_quarkus_bench-complex_proto,build-java_quarkus_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXjava_quarkus_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXjava_quarkus_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXjava_quarkus_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh java_quarkus_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXjava_quarkus_bench:
  build-kotlin_grpc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh kotlin_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXkotlin_grpc_bench:complex_proto $GRPC_TAGS_PREFIXkotlin_grpc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXkotlin_grpc_bench:complex_proto-$GITHUB_REF_NAME
  build-kotlin_grpc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-kotlin_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh kotlin_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXkotlin_grpc_bench:string_1kB $GRPC_TAGS_PREFIXkotlin_grpc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXkotlin_grpc_bench:string_1kB-$GITHUB_REF_NAME
  build-kotlin_grpc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-kotlin_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh kotlin_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXkotlin_grpc_bench:string_10B $GRPC_TAGS_PREFIXkotlin_grpc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXkotlin_grpc_bench:string_10B-$GITHUB_REF_NAME
  build-kotlin_grpc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-kotlin_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh kotlin_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXkotlin_grpc_bench:string_10kB $GRPC_TAGS_PREFIXkotlin_grpc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXkotlin_grpc_bench:string_10kB-$GITHUB_REF_NAME
  build-kotlin_grpc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-kotlin_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh kotlin_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXkotlin_grpc_bench:string_100B $GRPC_TAGS_PREFIXkotlin_grpc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXkotlin_grpc_bench:string_100B-$GITHUB_REF_NAME
  bench-kotlin_grpc_bench:
    runs-on: ubuntu-latest
    needs: [,build-kotlin_grpc_bench-string_1kB,build-kotlin_grpc_bench-string_10B,build-kotlin_grpc_bench-string_10kB,build-kotlin_grpc_bench-complex_proto,build-kotlin_grpc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXkotlin_grpc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXkotlin_grpc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXkotlin_grpc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh kotlin_grpc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXkotlin_grpc_bench:
  build-node_grpcjs_st_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh node_grpcjs_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:complex_proto $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:complex_proto-$GITHUB_REF_NAME
  build-node_grpcjs_st_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-node_grpcjs_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh node_grpcjs_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:string_1kB $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:string_1kB-$GITHUB_REF_NAME
  build-node_grpcjs_st_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-node_grpcjs_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh node_grpcjs_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:string_10B $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:string_10B-$GITHUB_REF_NAME
  build-node_grpcjs_st_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-node_grpcjs_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh node_grpcjs_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:string_10kB $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:string_10kB-$GITHUB_REF_NAME
  build-node_grpcjs_st_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-node_grpcjs_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh node_grpcjs_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:string_100B $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:string_100B-$GITHUB_REF_NAME
  bench-node_grpcjs_st_bench:
    runs-on: ubuntu-latest
    needs: [,build-node_grpcjs_st_bench-string_1kB,build-node_grpcjs_st_bench-string_10B,build-node_grpcjs_st_bench-string_10kB,build-node_grpcjs_st_bench-complex_proto,build-node_grpcjs_st_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh node_grpcjs_st_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXnode_grpcjs_st_bench:
  build-php_grpc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh php_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXphp_grpc_bench:complex_proto $GRPC_TAGS_PREFIXphp_grpc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXphp_grpc_bench:complex_proto-$GITHUB_REF_NAME
  build-php_grpc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-php_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh php_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXphp_grpc_bench:string_1kB $GRPC_TAGS_PREFIXphp_grpc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXphp_grpc_bench:string_1kB-$GITHUB_REF_NAME
  build-php_grpc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-php_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh php_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXphp_grpc_bench:string_10B $GRPC_TAGS_PREFIXphp_grpc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXphp_grpc_bench:string_10B-$GITHUB_REF_NAME
  build-php_grpc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-php_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh php_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXphp_grpc_bench:string_10kB $GRPC_TAGS_PREFIXphp_grpc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXphp_grpc_bench:string_10kB-$GITHUB_REF_NAME
  build-php_grpc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-php_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh php_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXphp_grpc_bench:string_100B $GRPC_TAGS_PREFIXphp_grpc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXphp_grpc_bench:string_100B-$GITHUB_REF_NAME
  bench-php_grpc_bench:
    runs-on: ubuntu-latest
    needs: [,build-php_grpc_bench-string_1kB,build-php_grpc_bench-string_10B,build-php_grpc_bench-string_10kB,build-php_grpc_bench-complex_proto,build-php_grpc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXphp_grpc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXphp_grpc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXphp_grpc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh php_grpc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXphp_grpc_bench:
  build-python_async_grpc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh python_async_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXpython_async_grpc_bench:complex_proto $GRPC_TAGS_PREFIXpython_async_grpc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXpython_async_grpc_bench:complex_proto-$GITHUB_REF_NAME
  build-python_async_grpc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-python_async_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh python_async_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXpython_async_grpc_bench:string_1kB $GRPC_TAGS_PREFIXpython_async_grpc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXpython_async_grpc_bench:string_1kB-$GITHUB_REF_NAME
  build-python_async_grpc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-python_async_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh python_async_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXpython_async_grpc_bench:string_10B $GRPC_TAGS_PREFIXpython_async_grpc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXpython_async_grpc_bench:string_10B-$GITHUB_REF_NAME
  build-python_async_grpc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-python_async_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh python_async_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXpython_async_grpc_bench:string_10kB $GRPC_TAGS_PREFIXpython_async_grpc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXpython_async_grpc_bench:string_10kB-$GITHUB_REF_NAME
  build-python_async_grpc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-python_async_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh python_async_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXpython_async_grpc_bench:string_100B $GRPC_TAGS_PREFIXpython_async_grpc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXpython_async_grpc_bench:string_100B-$GITHUB_REF_NAME
  bench-python_async_grpc_bench:
    runs-on: ubuntu-latest
    needs: [,build-python_async_grpc_bench-string_1kB,build-python_async_grpc_bench-string_10B,build-python_async_grpc_bench-string_10kB,build-python_async_grpc_bench-complex_proto,build-python_async_grpc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXpython_async_grpc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXpython_async_grpc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXpython_async_grpc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh python_async_grpc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXpython_async_grpc_bench:
  build-python_grpc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh python_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXpython_grpc_bench:complex_proto $GRPC_TAGS_PREFIXpython_grpc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXpython_grpc_bench:complex_proto-$GITHUB_REF_NAME
  build-python_grpc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-python_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh python_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXpython_grpc_bench:string_1kB $GRPC_TAGS_PREFIXpython_grpc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXpython_grpc_bench:string_1kB-$GITHUB_REF_NAME
  build-python_grpc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-python_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh python_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXpython_grpc_bench:string_10B $GRPC_TAGS_PREFIXpython_grpc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXpython_grpc_bench:string_10B-$GITHUB_REF_NAME
  build-python_grpc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-python_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh python_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXpython_grpc_bench:string_10kB $GRPC_TAGS_PREFIXpython_grpc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXpython_grpc_bench:string_10kB-$GITHUB_REF_NAME
  build-python_grpc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-python_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh python_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXpython_grpc_bench:string_100B $GRPC_TAGS_PREFIXpython_grpc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXpython_grpc_bench:string_100B-$GITHUB_REF_NAME
  bench-python_grpc_bench:
    runs-on: ubuntu-latest
    needs: [,build-python_grpc_bench-string_1kB,build-python_grpc_bench-string_10B,build-python_grpc_bench-string_10kB,build-python_grpc_bench-complex_proto,build-python_grpc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXpython_grpc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXpython_grpc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXpython_grpc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh python_grpc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXpython_grpc_bench:
  build-ruby_grpc_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh ruby_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXruby_grpc_bench:complex_proto $GRPC_TAGS_PREFIXruby_grpc_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXruby_grpc_bench:complex_proto-$GITHUB_REF_NAME
  build-ruby_grpc_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-ruby_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh ruby_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXruby_grpc_bench:string_1kB $GRPC_TAGS_PREFIXruby_grpc_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXruby_grpc_bench:string_1kB-$GITHUB_REF_NAME
  build-ruby_grpc_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-ruby_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh ruby_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXruby_grpc_bench:string_10B $GRPC_TAGS_PREFIXruby_grpc_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXruby_grpc_bench:string_10B-$GITHUB_REF_NAME
  build-ruby_grpc_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-ruby_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh ruby_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXruby_grpc_bench:string_10kB $GRPC_TAGS_PREFIXruby_grpc_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXruby_grpc_bench:string_10kB-$GITHUB_REF_NAME
  build-ruby_grpc_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-ruby_grpc_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh ruby_grpc_bench
    - run: docker tag $GRPC_TAGS_PREFIXruby_grpc_bench:string_100B $GRPC_TAGS_PREFIXruby_grpc_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXruby_grpc_bench:string_100B-$GITHUB_REF_NAME
  bench-ruby_grpc_bench:
    runs-on: ubuntu-latest
    needs: [,build-ruby_grpc_bench-string_1kB,build-ruby_grpc_bench-string_10B,build-ruby_grpc_bench-string_10kB,build-ruby_grpc_bench-complex_proto,build-ruby_grpc_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXruby_grpc_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXruby_grpc_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXruby_grpc_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh ruby_grpc_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXruby_grpc_bench:
  build-rust_grpcio_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh rust_grpcio_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_grpcio_bench:complex_proto $GRPC_TAGS_PREFIXrust_grpcio_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_grpcio_bench:complex_proto-$GITHUB_REF_NAME
  build-rust_grpcio_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-rust_grpcio_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh rust_grpcio_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_grpcio_bench:string_1kB $GRPC_TAGS_PREFIXrust_grpcio_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_grpcio_bench:string_1kB-$GITHUB_REF_NAME
  build-rust_grpcio_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-rust_grpcio_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh rust_grpcio_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_grpcio_bench:string_10B $GRPC_TAGS_PREFIXrust_grpcio_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_grpcio_bench:string_10B-$GITHUB_REF_NAME
  build-rust_grpcio_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-rust_grpcio_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh rust_grpcio_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_grpcio_bench:string_10kB $GRPC_TAGS_PREFIXrust_grpcio_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_grpcio_bench:string_10kB-$GITHUB_REF_NAME
  build-rust_grpcio_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-rust_grpcio_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh rust_grpcio_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_grpcio_bench:string_100B $GRPC_TAGS_PREFIXrust_grpcio_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_grpcio_bench:string_100B-$GITHUB_REF_NAME
  bench-rust_grpcio_bench:
    runs-on: ubuntu-latest
    needs: [,build-rust_grpcio_bench-string_1kB,build-rust_grpcio_bench-string_10B,build-rust_grpcio_bench-string_10kB,build-rust_grpcio_bench-complex_proto,build-rust_grpcio_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXrust_grpcio_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXrust_grpcio_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXrust_grpcio_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh rust_grpcio_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXrust_grpcio_bench:
  build-rust_thruster_mt_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh rust_thruster_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_thruster_mt_bench:complex_proto $GRPC_TAGS_PREFIXrust_thruster_mt_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_thruster_mt_bench:complex_proto-$GITHUB_REF_NAME
  build-rust_thruster_mt_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-rust_thruster_mt_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh rust_thruster_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_thruster_mt_bench:string_1kB $GRPC_TAGS_PREFIXrust_thruster_mt_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_thruster_mt_bench:string_1kB-$GITHUB_REF_NAME
  build-rust_thruster_mt_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-rust_thruster_mt_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh rust_thruster_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_thruster_mt_bench:string_10B $GRPC_TAGS_PREFIXrust_thruster_mt_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_thruster_mt_bench:string_10B-$GITHUB_REF_NAME
  build-rust_thruster_mt_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-rust_thruster_mt_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh rust_thruster_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_thruster_mt_bench:string_10kB $GRPC_TAGS_PREFIXrust_thruster_mt_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_thruster_mt_bench:string_10kB-$GITHUB_REF_NAME
  build-rust_thruster_mt_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-rust_thruster_mt_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh rust_thruster_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_thruster_mt_bench:string_100B $GRPC_TAGS_PREFIXrust_thruster_mt_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_thruster_mt_bench:string_100B-$GITHUB_REF_NAME
  bench-rust_thruster_mt_bench:
    runs-on: ubuntu-latest
    needs: [,build-rust_thruster_mt_bench-string_1kB,build-rust_thruster_mt_bench-string_10B,build-rust_thruster_mt_bench-string_10kB,build-rust_thruster_mt_bench-complex_proto,build-rust_thruster_mt_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXrust_thruster_mt_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXrust_thruster_mt_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXrust_thruster_mt_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh rust_thruster_mt_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXrust_thruster_mt_bench:
  build-rust_thruster_st_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh rust_thruster_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_thruster_st_bench:complex_proto $GRPC_TAGS_PREFIXrust_thruster_st_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_thruster_st_bench:complex_proto-$GITHUB_REF_NAME
  build-rust_thruster_st_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-rust_thruster_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh rust_thruster_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_thruster_st_bench:string_1kB $GRPC_TAGS_PREFIXrust_thruster_st_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_thruster_st_bench:string_1kB-$GITHUB_REF_NAME
  build-rust_thruster_st_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-rust_thruster_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh rust_thruster_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_thruster_st_bench:string_10B $GRPC_TAGS_PREFIXrust_thruster_st_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_thruster_st_bench:string_10B-$GITHUB_REF_NAME
  build-rust_thruster_st_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-rust_thruster_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh rust_thruster_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_thruster_st_bench:string_10kB $GRPC_TAGS_PREFIXrust_thruster_st_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_thruster_st_bench:string_10kB-$GITHUB_REF_NAME
  build-rust_thruster_st_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-rust_thruster_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh rust_thruster_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_thruster_st_bench:string_100B $GRPC_TAGS_PREFIXrust_thruster_st_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_thruster_st_bench:string_100B-$GITHUB_REF_NAME
  bench-rust_thruster_st_bench:
    runs-on: ubuntu-latest
    needs: [,build-rust_thruster_st_bench-string_1kB,build-rust_thruster_st_bench-string_10B,build-rust_thruster_st_bench-string_10kB,build-rust_thruster_st_bench-complex_proto,build-rust_thruster_st_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXrust_thruster_st_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXrust_thruster_st_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXrust_thruster_st_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh rust_thruster_st_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXrust_thruster_st_bench:
  build-rust_tonic_mt_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh rust_tonic_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_tonic_mt_bench:complex_proto $GRPC_TAGS_PREFIXrust_tonic_mt_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_tonic_mt_bench:complex_proto-$GITHUB_REF_NAME
  build-rust_tonic_mt_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-rust_tonic_mt_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh rust_tonic_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_tonic_mt_bench:string_1kB $GRPC_TAGS_PREFIXrust_tonic_mt_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_tonic_mt_bench:string_1kB-$GITHUB_REF_NAME
  build-rust_tonic_mt_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-rust_tonic_mt_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh rust_tonic_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_tonic_mt_bench:string_10B $GRPC_TAGS_PREFIXrust_tonic_mt_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_tonic_mt_bench:string_10B-$GITHUB_REF_NAME
  build-rust_tonic_mt_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-rust_tonic_mt_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh rust_tonic_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_tonic_mt_bench:string_10kB $GRPC_TAGS_PREFIXrust_tonic_mt_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_tonic_mt_bench:string_10kB-$GITHUB_REF_NAME
  build-rust_tonic_mt_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-rust_tonic_mt_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh rust_tonic_mt_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_tonic_mt_bench:string_100B $GRPC_TAGS_PREFIXrust_tonic_mt_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_tonic_mt_bench:string_100B-$GITHUB_REF_NAME
  bench-rust_tonic_mt_bench:
    runs-on: ubuntu-latest
    needs: [,build-rust_tonic_mt_bench-string_1kB,build-rust_tonic_mt_bench-string_10B,build-rust_tonic_mt_bench-string_10kB,build-rust_tonic_mt_bench-complex_proto,build-rust_tonic_mt_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXrust_tonic_mt_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXrust_tonic_mt_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXrust_tonic_mt_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh rust_tonic_mt_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXrust_tonic_mt_bench:
  build-rust_tonic_st_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh rust_tonic_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_tonic_st_bench:complex_proto $GRPC_TAGS_PREFIXrust_tonic_st_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_tonic_st_bench:complex_proto-$GITHUB_REF_NAME
  build-rust_tonic_st_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-rust_tonic_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh rust_tonic_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_tonic_st_bench:string_1kB $GRPC_TAGS_PREFIXrust_tonic_st_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_tonic_st_bench:string_1kB-$GITHUB_REF_NAME
  build-rust_tonic_st_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-rust_tonic_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh rust_tonic_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_tonic_st_bench:string_10B $GRPC_TAGS_PREFIXrust_tonic_st_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_tonic_st_bench:string_10B-$GITHUB_REF_NAME
  build-rust_tonic_st_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-rust_tonic_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh rust_tonic_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_tonic_st_bench:string_10kB $GRPC_TAGS_PREFIXrust_tonic_st_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_tonic_st_bench:string_10kB-$GITHUB_REF_NAME
  build-rust_tonic_st_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-rust_tonic_st_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh rust_tonic_st_bench
    - run: docker tag $GRPC_TAGS_PREFIXrust_tonic_st_bench:string_100B $GRPC_TAGS_PREFIXrust_tonic_st_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXrust_tonic_st_bench:string_100B-$GITHUB_REF_NAME
  bench-rust_tonic_st_bench:
    runs-on: ubuntu-latest
    needs: [,build-rust_tonic_st_bench-string_1kB,build-rust_tonic_st_bench-string_10B,build-rust_tonic_st_bench-string_10kB,build-rust_tonic_st_bench-complex_proto,build-rust_tonic_st_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXrust_tonic_st_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXrust_tonic_st_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXrust_tonic_st_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh rust_tonic_st_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXrust_tonic_st_bench:
  build-scala_akka_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh scala_akka_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_akka_bench:complex_proto $GRPC_TAGS_PREFIXscala_akka_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_akka_bench:complex_proto-$GITHUB_REF_NAME
  build-scala_akka_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-scala_akka_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh scala_akka_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_akka_bench:string_1kB $GRPC_TAGS_PREFIXscala_akka_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_akka_bench:string_1kB-$GITHUB_REF_NAME
  build-scala_akka_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-scala_akka_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh scala_akka_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_akka_bench:string_10B $GRPC_TAGS_PREFIXscala_akka_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_akka_bench:string_10B-$GITHUB_REF_NAME
  build-scala_akka_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-scala_akka_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh scala_akka_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_akka_bench:string_10kB $GRPC_TAGS_PREFIXscala_akka_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_akka_bench:string_10kB-$GITHUB_REF_NAME
  build-scala_akka_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-scala_akka_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh scala_akka_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_akka_bench:string_100B $GRPC_TAGS_PREFIXscala_akka_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_akka_bench:string_100B-$GITHUB_REF_NAME
  bench-scala_akka_bench:
    runs-on: ubuntu-latest
    needs: [,build-scala_akka_bench-string_1kB,build-scala_akka_bench-string_10B,build-scala_akka_bench-string_10kB,build-scala_akka_bench-complex_proto,build-scala_akka_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXscala_akka_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXscala_akka_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXscala_akka_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh scala_akka_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXscala_akka_bench:
  build-scala_fs2_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh scala_fs2_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_fs2_bench:complex_proto $GRPC_TAGS_PREFIXscala_fs2_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_fs2_bench:complex_proto-$GITHUB_REF_NAME
  build-scala_fs2_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-scala_fs2_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh scala_fs2_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_fs2_bench:string_1kB $GRPC_TAGS_PREFIXscala_fs2_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_fs2_bench:string_1kB-$GITHUB_REF_NAME
  build-scala_fs2_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-scala_fs2_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh scala_fs2_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_fs2_bench:string_10B $GRPC_TAGS_PREFIXscala_fs2_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_fs2_bench:string_10B-$GITHUB_REF_NAME
  build-scala_fs2_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-scala_fs2_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh scala_fs2_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_fs2_bench:string_10kB $GRPC_TAGS_PREFIXscala_fs2_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_fs2_bench:string_10kB-$GITHUB_REF_NAME
  build-scala_fs2_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-scala_fs2_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh scala_fs2_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_fs2_bench:string_100B $GRPC_TAGS_PREFIXscala_fs2_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_fs2_bench:string_100B-$GITHUB_REF_NAME
  bench-scala_fs2_bench:
    runs-on: ubuntu-latest
    needs: [,build-scala_fs2_bench-string_1kB,build-scala_fs2_bench-string_10B,build-scala_fs2_bench-string_10kB,build-scala_fs2_bench-complex_proto,build-scala_fs2_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXscala_fs2_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXscala_fs2_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXscala_fs2_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh scala_fs2_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXscala_fs2_bench:
  build-scala_zio_bench-complex_proto:
    runs-on: ubuntu-latest
    needs: meta-check
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: ./build.sh scala_zio_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_zio_bench:complex_proto $GRPC_TAGS_PREFIXscala_zio_bench:complex_proto-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_zio_bench:complex_proto-$GITHUB_REF_NAME
  build-scala_zio_bench-string_1kB:
    runs-on: ubuntu-latest
    needs: build-scala_zio_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_1kB ./build.sh scala_zio_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_zio_bench:string_1kB $GRPC_TAGS_PREFIXscala_zio_bench:string_1kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_zio_bench:string_1kB-$GITHUB_REF_NAME
  build-scala_zio_bench-string_10B:
    runs-on: ubuntu-latest
    needs: build-scala_zio_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10B ./build.sh scala_zio_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_zio_bench:string_10B $GRPC_TAGS_PREFIXscala_zio_bench:string_10B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_zio_bench:string_10B-$GITHUB_REF_NAME
  build-scala_zio_bench-string_10kB:
    runs-on: ubuntu-latest
    needs: build-scala_zio_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_10kB ./build.sh scala_zio_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_zio_bench:string_10kB $GRPC_TAGS_PREFIXscala_zio_bench:string_10kB-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_zio_bench:string_10kB-$GITHUB_REF_NAME
  build-scala_zio_bench-string_100B:
    runs-on: ubuntu-latest
    needs: build-scala_zio_bench-complex_proto
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: GRPC_REQUEST_SCENARIO=string_100B ./build.sh scala_zio_bench
    - run: docker tag $GRPC_TAGS_PREFIXscala_zio_bench:string_100B $GRPC_TAGS_PREFIXscala_zio_bench:string_100B-$GITHUB_REF_NAME
    - run: docker push $GRPC_TAGS_PREFIXscala_zio_bench:string_100B-$GITHUB_REF_NAME
  bench-scala_zio_bench:
    runs-on: ubuntu-latest
    needs: [,build-scala_zio_bench-string_1kB,build-scala_zio_bench-string_10B,build-scala_zio_bench-string_10kB,build-scala_zio_bench-complex_proto,build-scala_zio_bench-string_100B]
    steps:
    - uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
    - uses: actions/checkout@v2
    - run: docker pull $GRPC_TAGS_PREFIXscala_zio_bench:-$GITHUB_REF_NAME
    - run: docker tag  $GRPC_TAGS_PREFIXscala_zio_bench:-$GITHUB_REF_NAME $GRPC_TAGS_PREFIXscala_zio_bench:
    - run: GRPC_REQUEST_SCENARIO= ./bench.sh scala_zio_bench
    # If on master push naked image as well
    - if: ${{ github.ref == 'refs/heads/master' }}
      run: docker push $GRPC_TAGS_PREFIXscala_zio_bench:
